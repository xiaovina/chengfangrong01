<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>EOS Analizy tool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" media="screen" href="css/bootstrap.min.css" />
  <script src="js/jquery.min.js"></script>
</head>
<body class="container">
  <h2>EOS Analizy tool (0-9)</h2>
  <div class="row">
    <div class="col-sm-2">
      期号：<span id="newestGameId" style="color:blue;">-</span>
    </div>
    <!-- <div class="col-sm-2">
      目前连<span id="nonstopDaXiao" style="color: red"></span><span id="nonstopDaXiaoTimes" style="color: red"></span>次;
    </div>
    <div class="col-sm-2">
      目前连<span id="nonstopDanShuang" style="color: red"></span><span id="nonstopDanShuangTimes"  style="color: red"></span>次;
    </div>
    <div class="col-sm-6" id="allProbability" style="height: 92px;">
      下一注投大中奖概率：所有时间平均：<span id="allProbability-0" style="color: red">-</span>%; <br/>
      下一注投小中奖概率：所有时间平均：<span id="allProbability-1" style="color: red">-</span>%; <br/>
      下一注投单中奖概率：所有时间平均：<span id="allProbability-2" style="color: red">-</span>%; <br/>
      下一注投双中奖概率：所有时间平均：<span id="allProbability-3" style="color: red">-</span>%; <br/>
    </div> -->
  </div>
  <hr/>

  <div class="row" style="margin-top: 20px;">
    <div class="form-group col-sm-12">
      <label class="radio-inline col-sm-1">
          <input type="radio" name="optionsRadiosFirb" id="optionsRadios2" value="1"> 1小时
      </label>
      <label class="radio-inline col-sm-1">
          <input type="radio" name="optionsRadiosFirb" id="optionsRadios2" value="2"> 2小时
      </label>
      <label class="radio-inline col-sm-1">
          <input type="radio" name="optionsRadiosFirb" id="optionsRadios5" value="5"> 5小时
      </label>
      <label class="radio-inline col-sm-1">
          <input type="radio" name="optionsRadiosFirb" id="optionsRadios8" value="8"> 8小时
      </label>
      <label class="radio-inline col-sm-2">
          <input type="radio" name="optionsRadiosFirb" id="optionsRadios13" value="13"> 13小时
      </label>
      <label class="radio-inline col-sm-2">
          <input type="radio" name="optionsRadiosFirb" id="optionsRadios21" value="21"> 21小时
      </label>
      <label class="radio-inline col-sm-2">
          <input type="radio" name="optionsRadiosFirb" id="optionsRadios34" value="34"> 34小时
      </label>
    </div>
    <div class="form-group col-sm-12">
      <label class="radio-inline col-sm-2">
          <input type="radio" name="optionsRadiosFirb" id="optionsRadios55" value="55"> 55小时
      </label>
      <label class="radio-inline col-sm-2">
          <input type="radio" name="optionsRadiosFirb" id="optionsRadios89" value="89"> 89小时
      </label>
      <label class="radio-inline col-sm-2">
          <input type="radio" name="optionsRadiosFirb" id="optionsRadios144" value="144"> 144小时
      </label>
      <label class="radio-inline col-sm-2">
          <input type="radio" name="optionsRadiosFirb" id="optionsRadios233" value="233"> 233小时
      </label>
    </div>
    <div class="form-group col-sm-12">
      <div class="form-group col-sm-2">
        <button type="button" class="btn btn-primary" onclick="doSliceAnalizy()">分析</button>
      </div>
      <div class="form-group col-sm-8" id="sliceProbability" style="height: 92px;"></div>
        <!-- <span id="slice" style="color: red">-</span>小时总中奖概率<span id="sliceProbability" style="color: red">-</span>%;<br/> -->
      </div>
    </div>
  </div>
</body>
<script>


$(function(){
  console.log('init');
  getNewestGameId();
})

function _sleep(milliseconds) {
  return new Promise(resolve => setTimeout(resolve, milliseconds))
}

function getNewestGameId() {
  $.ajax({
      url: `/api/v1/lottery/eos/newest`,
      method: 'get',
    }).done(function(res) {
      console.log(res);
      $(`#newestGameId`).html(res[0].gameid);

      _sleep(5000).then(() => {
        getNewestGameId();
      })
    });
}


function doSliceAnalizy() {
  var optionsRadiosFirb = $("input[name=optionsRadiosFirb]:checked").val();
  console.log(optionsRadiosFirb);

  if (!optionsRadiosFirb) {
    alert('请选择小时数！');
    return;
  } else {

    $("#sliceProbability").html('');
    $.ajax({
      url: `/api/v1/lottery/probability/slice/zerotonine?slice=${optionsRadiosFirb}`,
      method: 'get',
    }).done(function(res) {
      console.log(res);
      if (res && res.length > 0) {
        res.forEach((v, k) => {
          $("#sliceProbability").append(`<span style="color: red">${optionsRadiosFirb}</span>小时投注${k}的中奖概率<span style="color: red">${v}</span>%;<br/>`);
        });
      }
    });
  }
}
</script>
</html>
